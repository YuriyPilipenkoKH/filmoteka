{"mappings":"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","sources":["src/js/renderMovieCardsToLibriary.js","src/js/searchMoviesInLibrary.js"],"sourcesContent":["import {\n  renderMovieCardsToQueue,\n  renderMovieCardsToWatched,\n} from './pagination';\n\nconst refs = {\n  queueBtn: document.querySelectorAll('.header__btn-queue')[0],\n  watchedBtn: document.querySelectorAll('.header__btn-watched')[0],\n  watchedBtnMobile: document.querySelectorAll('.header__btn-watched')[1],\n  queueBtnMobile: document.querySelectorAll('.header__btn-queue')[1],\n};\n\nrefs.queueBtn.addEventListener('click', renderMovieCardsToQueueCategory);\nrefs.watchedBtn.addEventListener('click', renderMovieCardsToWatchedCategory);\nrefs.watchedBtnMobile.addEventListener(\n  'click',\n  renderMovieCardsToWatchedCategory\n);\nrefs.queueBtnMobile.addEventListener('click', renderMovieCardsToQueueCategory);\n\nrenderMovieCardsToQueue();\n\nfunction renderMovieCardsToQueueCategory() {\n  refs.queueBtn.classList.add('header__btn-category--current');\n  refs.watchedBtn.classList.remove('header__btn-category--current');\n  refs.queueBtnMobile.classList.add('header__btn-category--current');\n  refs.watchedBtnMobile.classList.remove('header__btn-category--current');\n  renderMovieCardsToQueue();\n}\n\nfunction renderMovieCardsToWatchedCategory() {\n  refs.queueBtn.classList.remove('header__btn-category--current');\n  refs.watchedBtn.classList.add('header__btn-category--current');\n  refs.queueBtnMobile.classList.remove('header__btn-category--current');\n  refs.watchedBtnMobile.classList.add('header__btn-category--current');\n\n  renderMovieCardsToWatched();\n}\n","import Pagination from 'tui-pagination';\nimport 'tui-pagination/dist/tui-pagination.css';\nimport '../sass/components/_my-library.scss';\nimport '../sass/components/_img-library.scss';\nimport { refs } from './refs';\n\n\nconst librarySearchFormRef = document.querySelector('#library_submit');\n\nconst queueBtn = document.querySelector('.header__btn-queue');\nconst watchedBtn = document.querySelector('.header__btn-watched');\n\n\nlibrarySearchFormRef.addEventListener('submit', onLibrarySearchFormSubmit);\n\nfunction onLibrarySearchFormSubmit(e) {\n  e.preventDefault();\n\n  const searchQuery = e.currentTarget.elements.query.value;\n\n  if (queueBtn.classList.contains('header__btn-category--current')) {\n    searchMovieInLibrary(searchQuery, 'queue');\n  } else if (watchedBtn.classList.contains('header__btn-category--current')) {\n    searchMovieInLibrary(searchQuery, 'watched');\n  }\n}\n\nfunction searchMovieInLibrary(searchQuery, localStorageItem) {\n  const arrOfMoviesInLibrary =\n    JSON.parse(localStorage.getItem(localStorageItem)) || [];\n  const arrOfQueryMovies = arrOfMoviesInLibrary.filter(movie =>\n    movie.title.toLowerCase().includes(searchQuery.toLowerCase().trim())\n  );\n\n  refs.galleryList.innerHTML = `<li class=\"img-library\"><span class=\"text-library\">there are no similar films in this category</span></li>`;\n\n  if (searchQuery.trim() === '') {\n    refs.galleryList.innerHTML = `<li class=\"img-library\"><span class=\"text-library\">The search query should not be empty</span></li>`;\n    return;\n  }\n\n  if (arrOfQueryMovies.length === 0) {\n    refs.galleryList.innerHTML = `<li class=\"img-library\"><span class=\"text-library\">There are no similar movies in this category</span></li>`;\n    return;\n  }\n\n  renderMovieCards(arrOfQueryMovies);\n}\n\nfunction renderMovieCards(arrOfQueryMovies) {\n  let arrOfMovies = arrOfQueryMovies || [];\n\n  if (arrOfMovies.length === 0) {\n    const ul = document.querySelector('.gallery-list');\n    const markup = `<li class=\"img-library\"><span class=\"text-library\">Please select a movie on the main page</span></li>`;\n    ul.innerHTML = markup;\n  } else {\n    const DEFAULT_POSTER_URL =\n      'https://motivatevalmorgan.com/wp-content/uploads/2016/06/default-movie.jpg';\n\n    const itemsPerPage = 20;\n    const totalItems = arrOfMovies.length;\n    const totalPages = Math.ceil(totalItems / itemsPerPage);\n    const ul = document.querySelector('.gallery-list');\n\n    // Create the pagination instance and attach the event listener\n    const paginationElement = document.getElementById('pagination');\n\n    const pagination = new Pagination(paginationElement, {\n      totalItems: totalItems,\n      itemsPerPage: itemsPerPage,\n      visiblePages: 5,\n      page: 1,\n      centerAlign: true,\n      firstItemClassName: 'tui-first-child',\n      lastItemClassName: 'tui-last-child',\n      template: {\n        page: '<a href=\"#\" class=\"tui-page-btn\">{{page}}</a>',\n        currentPage:\n          '<strong class=\"tui-page-btn tui-is-selected\">{{page}}</strong>',\n\n        disabledMoveButton:\n          '<span class=\"tui-page-btn tui-is-disabled tui-{{type}}\">' +\n          '<span class=\"tui-ico-{{type}}\">{{type}}</span>' +\n          '</span>',\n        moreButton:\n          '<a href=\"#\" class=\"tui-page-btn tui-{{type}}-is-ellip\">' +\n          '<span class=\"tui-ico-ellip\">...</span>' +\n          '</a>',\n      },\n      usageStatistics: false,\n    });\n    pagination.on('afterMove', function (eventData) {\n      ul.innerHTML = '';\n\n      const startIdx = (eventData.page - 1) * itemsPerPage;\n      const endIdx = startIdx + itemsPerPage;\n\n      const data = arrOfMovies;\n\n      const moviesArray = data.slice(startIdx, endIdx);\n\n      const IMG_URL = 'https://image.tmdb.org/t/p/w500';\n      const markup = moviesArray\n        .map(({ poster_path, title, genres, id, release_date }) => {\n          const date = release_date.split('').splice(0, 4).join('');\n          let genresToShow = '';\n          const genresCount = genres.length;\n          const posterUrl = poster_path\n            ? `${IMG_URL}${poster_path}`\n            : DEFAULT_POSTER_URL;\n\n          if (genresCount === 1) {\n            genresToShow = `${genres[0].name}`;\n          } else if (genresCount === 2) {\n            genresToShow = `${genres[0].name}, ${genres[1].name}`;\n          } else if (genresCount > 2) {\n            genresToShow = `${genres[0].name}, ${genres[1].name}, other`;\n          }\n\n          return `<li class=\"film-card\">\n      <a href=\"modal-film.html\" class=\"film-card__link\" >\n        <div class=\"film-card__img\">\n          <img src=\"${posterUrl}\" alt=\"${title}\" loading=\"lazy\" data-id=\"${id}\"/>\n        </div>\n        <div class=\"film-card__info\">\n          <p class=\"film-card__title\">${title}</p>\n          <p class=\"film-card__description\">${genresToShow} | ${date}</p>\n        </div>\n      </a>\n    </li>`;\n        })\n        .join('');\n\n      refs.galleryList.innerHTML = markup;\n    });\n\n    // Load the first page when the page is loaded\n    pagination.movePageTo(1);\n  }\n}\n"],"names":["$2nhTy","parcelRequire","$c46b2cb223d15c67$var$refs","queueBtn","document","querySelectorAll","watchedBtn","watchedBtnMobile","queueBtnMobile","$c46b2cb223d15c67$var$renderMovieCardsToQueueCategory","classList","add","remove","renderMovieCardsToQueue","$c46b2cb223d15c67$var$renderMovieCardsToWatchedCategory","renderMovieCardsToWatched","addEventListener","$fb9GJ","$2636201003aba50f$var$librarySearchFormRef","querySelector","$2636201003aba50f$var$queueBtn","$2636201003aba50f$var$watchedBtn","$2636201003aba50f$var$searchMovieInLibrary","searchQuery","localStorageItem","arrOfQueryMovies","JSON","parse","localStorage","getItem","filter","movie","title","toLowerCase","includes","trim","$krGWQ","refs","galleryList","innerHTML","length","arrOfMovies","markup","DEFAULT_POSTER_URL","itemsPerPage","totalItems","ul","Math","ceil","paginationElement","getElementById","pagination","$parcel$interopDefault","visiblePages","page","centerAlign","firstItemClassName","lastItemClassName","template","currentPage","disabledMoveButton","moreButton","usageStatistics","on","eventData","startIdx","endIdx","moviesArray","slice","IMG_URL","map","poster_path","genres","id","release_date","date","split","splice","join","genresToShow","genresCount","posterUrl","name","movePageTo","$2636201003aba50f$var$renderMovieCards","e","preventDefault","currentTarget","elements","query","value","contains"],"version":3,"file":"my-library.9b725957.js.map"}